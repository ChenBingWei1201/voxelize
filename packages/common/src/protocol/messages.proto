syntax = "proto3";
package protocol;

message Vector3 {
  float x = 0;
  float y = 1;
  float z = 2;
}

message Quaternion {
  float x = 0;
  float y = 1;
  float z = 2;
  float w = 3;
}

message Peer {
  string name = 0;
  Vector3 position = 1;
  Quaternion rotation = 2;
}

message Entity {
  string id = 0;
  string type = 1;
  string data = 2;
  Vector3 position = 3;
  Vector3 target = 4;
  Vector3 heading = 5;
}

message Message {
  enum Type {
    INIT = 0;
    JOIN = 1;
    SIGNAL = 2;
    ECHO = 3;
    ERROR = 4;
    LEAVE = 5;
    PEER = 6;
    ENTITY = 7;
  }

  Type type = 0;
  string json = 1;
  string text = 2;
  Peer peer = 3;

  repeated string peers = 4;
  repeated Entity entities = 5;
}